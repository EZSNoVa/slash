import{s as _e,o as de,n as q,j as S,r as he}from"../chunks/scheduler.EpWGcs72.js";import{S as pe,i as be,g as h,s as C,r as x,C as ve,h as p,j as g,f as c,c as D,u as J,k as s,z as k,a as y,v as K,t as O,b as Q,d as I,w as W,p as X,e as Y,E as ie,F as H,m as ue,n as ce,o as fe}from"../chunks/index.vVMILz9O.js";import{F as te,p as ge,q as me}from"../chunks/index.5n3f9oEu.js";import{N as ke,n as we}from"../chunks/Notification.veq9gESc.js";import{R as ye}from"../chunks/types.emqlGWVk.js";function Ee(u){let t,e,o,l;const i=[Me,Ne],n=[];function a(r,d){return r[0].owner&&r[0].show_edit?0:1}return t=a(u),e=n[t]=i[t](u),{c(){e.c(),o=Y()},l(r){e.l(r),o=Y()},m(r,d){n[t].m(r,d),y(r,o,d),l=!0},p(r,d){let f=t;t=a(r),t===f?n[t].p(r,d):(X(),O(n[f],1,1,()=>{n[f]=null}),Q(),e=n[t],e?e.p(r,d):(e=n[t]=i[t](r),e.c()),I(e,1),e.m(o.parentNode,o))},i(r){l||(I(e),l=!0)},o(r){O(e),l=!1},d(r){r&&c(o),n[t].d(r)}}}function Te(u){let t,e,o;return{c(){t=h("form"),e=h("input"),this.h()},l(l){t=p(l,"FORM",{class:!0,method:!0,action:!0});var i=g(t);e=p(i,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),i.forEach(c),this.h()},h(){s(e,"type","url"),s(e,"name","avatar"),s(e,"placeholder","Profile avatar URL"),s(e,"class","w-full p-2 rounded-md border-gray-400 border-2 mb-2"),s(t,"class","m-0 flex flex-col justify-center items-center"),s(t,"method","post"),s(t,"action",o="/profile/"+u[0].username+"?/update_avatar")},m(l,i){y(l,t,i),k(t,e)},p(l,i){i&1&&o!==(o="/profile/"+l[0].username+"?/update_avatar")&&s(t,"action",o)},i:q,o:q,d(l){l&&c(t)}}}function Ne(u){let t,e,o,l,i,n;return{c(){t=h("button"),e=h("img"),this.h()},l(a){t=p(a,"BUTTON",{class:!0,title:!0});var r=g(t);e=p(r,"IMG",{class:!0,src:!0,alt:!0}),r.forEach(c),this.h()},h(){s(e,"class","w-30 h-30 rounded-full"),S(e.src,o=u[0].avatar)||s(e,"src",o),s(e,"alt",l=u[0].username+"'s profile avatar"),s(t,"class","mb-3 rounded-full border-white border-0 transition-all duration-200 ease-in-out hover:border-2 hover:scale-105 "),s(t,"title","Click to edit profile avatar")},m(a,r){y(a,t,r),k(t,e),i||(n=H(t,"click",u[6]),i=!0)},p(a,r){r&1&&!S(e.src,o=a[0].avatar)&&s(e,"src",o),r&1&&l!==(l=a[0].username+"'s profile avatar")&&s(e,"alt",l)},i:q,o:q,d(a){a&&c(t),i=!1,n()}}}function Me(u){let t,e,o,l,i,n,a,r,d;return e=new te({props:{icon:me}}),{c(){t=h("button"),x(e.$$.fragment),o=C(),l=h("img"),this.h()},l(f){t=p(f,"BUTTON",{class:!0,title:!0});var _=g(t);J(e.$$.fragment,_),_.forEach(c),o=D(f),l=p(f,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){s(t,"class","rounded-full no-bg w-min p-2 text-gray-400 border-gray-400 hover:text-white hover:border-white transition-all duration-200 ease-in-out"),s(t,"title","Edit profile avatar"),s(l,"class","w-30 h-30 rounded-full"),S(l.src,i=u[0].avatar)||s(l,"src",i),s(l,"alt",n=u[0].username+"'s profile avatar")},m(f,_){y(f,t,_),K(e,t,null),y(f,o,_),y(f,l,_),a=!0,r||(d=H(t,"click",u[5]),r=!0)},p(f,_){(!a||_&1&&!S(l.src,i=f[0].avatar))&&s(l,"src",i),(!a||_&1&&n!==(n=f[0].username+"'s profile avatar"))&&s(l,"alt",n)},i(f){a||(I(e.$$.fragment,f),a=!0)},o(f){O(e.$$.fragment,f),a=!1},d(f){f&&(c(t),c(o),c(l)),W(e),r=!1,d()}}}function Oe(u){let t,e,o,l;const i=[$e,je],n=[];function a(r,d){return r[0].owner&&r[0].show_edit?0:1}return t=a(u),e=n[t]=i[t](u),{c(){e.c(),o=Y()},l(r){e.l(r),o=Y()},m(r,d){n[t].m(r,d),y(r,o,d),l=!0},p(r,d){let f=t;t=a(r),t===f?n[t].p(r,d):(X(),O(n[f],1,1,()=>{n[f]=null}),Q(),e=n[t],e?e.p(r,d):(e=n[t]=i[t](r),e.c()),I(e,1),e.m(o.parentNode,o))},i(r){l||(I(e),l=!0)},o(r){O(e),l=!1},d(r){r&&c(o),n[t].d(r)}}}function Ie(u){let t,e,o,l,i;return{c(){t=h("form"),e=h("input"),this.h()},l(n){t=p(n,"FORM",{class:!0,method:!0,action:!0});var a=g(t);e=p(a,"INPUT",{class:!0,type:!0,title:!0,placeholder:!0,minlength:!0,maxlength:!0,name:!0,autocomplete:!0,pattern:!0}),a.forEach(c),this.h()},h(){s(e,"class","hover:border-blue-700"),s(e,"type","text"),s(e,"title","username"),s(e,"placeholder","some_username78"),s(e,"minlength","1"),s(e,"maxlength","16"),e.required=!0,s(e,"name","username"),s(e,"autocomplete","username"),s(e,"pattern","[a-z0-9_]+"),s(t,"class","m-0 flex flex-col justify-center items-center"),s(t,"method","post"),s(t,"action",o="/profile/"+u[0].username+"?/update_username")},m(n,a){y(n,t,a),k(t,e),ie(e,u[3]),l||(i=H(e,"input",u[7]),l=!0)},p(n,a){a&8&&e.value!==n[3]&&ie(e,n[3]),a&1&&o!==(o="/profile/"+n[0].username+"?/update_username")&&s(t,"action",o)},i:q,o:q,d(n){n&&c(t),l=!1,i()}}}function je(u){let t,e,o=u[0].username+"",l,i,n;return{c(){t=h("button"),e=h("h3"),l=ue(o),this.h()},l(a){t=p(a,"BUTTON",{class:!0,title:!0});var r=g(t);e=p(r,"H3",{class:!0});var d=g(e);l=ce(d,o),d.forEach(c),r.forEach(c),this.h()},h(){s(e,"class","m-0 text-2xl font-bold mb-2"),s(t,"class","w-full border-0 border-white transition-all duration-200 ease-in-out hover:border hover:scale-105 "),s(t,"title","Click to edit username")},m(a,r){y(a,t,r),k(t,e),k(e,l),i||(n=[H(e,"click",u[9]),H(t,"click",u[10])],i=!0)},p(a,r){r&1&&o!==(o=a[0].username+"")&&fe(l,o)},i:q,o:q,d(a){a&&c(t),i=!1,he(n)}}}function $e(u){let t,e,o=u[0].username+"",l,i,n,a,r,d,f;return a=new te({props:{icon:me}}),{c(){t=h("div"),e=h("h3"),l=ue(o),i=C(),n=h("button"),x(a.$$.fragment),this.h()},l(_){t=p(_,"DIV",{class:!0});var w=g(t);e=p(w,"H3",{class:!0});var j=g(e);l=ce(j,o),j.forEach(c),i=D(w),n=p(w,"BUTTON",{class:!0,title:!0});var v=g(n);J(a.$$.fragment,v),v.forEach(c),w.forEach(c),this.h()},h(){s(e,"class","text-2xl font-bold mb-2"),s(n,"class","rounded-full w-min p-2 text-gray-400 border-gray-400 hover:text-white hover:border-white transition-all duration-200 ease-in-out"),s(n,"title","Edit username"),s(t,"class","w-full flex flex-row justify-between items-center")},m(_,w){y(_,t,w),k(t,e),k(e,l),k(t,i),k(t,n),K(a,n,null),r=!0,d||(f=H(n,"click",u[8]),d=!0)},p(_,w){(!r||w&1)&&o!==(o=_[0].username+"")&&fe(l,o)},i(_){r||(I(a.$$.fragment,_),r=!0)},o(_){O(a.$$.fragment,_),r=!1},d(_){_&&c(t),W(a),d=!1,f()}}}function Ae(u){let t,e,o,l,i,n,a,r,d,f,_,w,j,v,F,Z,R,$,P,E,T,ee,N,M,A;document.title=t=u[0].username,w=new te({props:{icon:ge,class:"text-2xl"}}),F=new ke({});const re=[Te,Ee],U=[];function le(m,b){return m[2]?0:1}E=le(u),T=U[E]=re[E](u);const ae=[Ie,Oe],G=[];function oe(m,b){return m[1]?0:1}return N=oe(u),M=G[N]=ae[N](u),{c(){e=h("meta:og"),l=h("meta:og"),i=h("meta:og"),a=h("meta:og"),d=C(),f=h("nav"),_=h("a"),x(w.$$.fragment),j=C(),v=h("div"),x(F.$$.fragment),Z=C(),R=h("main"),$=h("div"),P=h("div"),T.c(),ee=C(),M.c(),this.h()},l(m){const b=ve("svelte-5oroqw",document.head);e=p(b,"META:OG",{title:!0}),g(e).forEach(c),l=p(b,"META:OG",{type:!0}),g(l).forEach(c),i=p(b,"META:OG",{image:!0}),g(i).forEach(c),a=p(b,"META:OG",{description:!0}),g(a).forEach(c),b.forEach(c),d=D(m),f=p(m,"NAV",{class:!0});var V=g(f);_=p(V,"A",{href:!0,class:!0});var B=g(_);J(w.$$.fragment,B),B.forEach(c),V.forEach(c),j=D(m),v=p(m,"DIV",{class:!0});var z=g(v);J(F.$$.fragment,z),Z=D(z),R=p(z,"MAIN",{class:!0});var ne=g(R);$=p(ne,"DIV",{class:!0});var L=g($);P=p(L,"DIV",{class:!0});var se=g(P);T.l(se),se.forEach(c),ee=D(L),M.l(L),L.forEach(c),ne.forEach(c),z.forEach(c),this.h()},h(){s(e,"title",o=u[0].username),s(l,"type","profile"),s(i,"image",n=u[0].avatar),s(a,"description",r=u[0].username+"'s profile"),s(_,"href",ye.HOME),s(_,"class","rotate text-gray-400 hover:text-gray-100"),s(f,"class","mt-2 flex justify-between items-center w-full p-2 border-b border-gray-700"),s(P,"class","container p-2"),s($,"class","flex flex-col justify-center items-center bg-gray-800 p-5 text-white text-center w-72 min-h-96 rounded-md shadow-md transition-all duration-500 ease-in-out "),s(R,"class","flex flex-col justify-center items-center"),s(v,"class","h-screen w-full flex flex-col justify-center items-center")},m(m,b){k(document.head,e),k(document.head,l),k(document.head,i),k(document.head,a),y(m,d,b),y(m,f,b),k(f,_),K(w,_,null),y(m,j,b),y(m,v,b),K(F,v,null),k(v,Z),k(v,R),k(R,$),k($,P),U[E].m(P,null),k($,ee),G[N].m($,null),A=!0},p(m,[b]){(!A||b&1)&&t!==(t=m[0].username)&&(document.title=t),(!A||b&1&&o!==(o=m[0].username))&&s(e,"title",o),(!A||b&1&&n!==(n=m[0].avatar))&&s(i,"image",n),(!A||b&1&&r!==(r=m[0].username+"'s profile"))&&s(a,"description",r);let V=E;E=le(m),E===V?U[E].p(m,b):(X(),O(U[V],1,1,()=>{U[V]=null}),Q(),T=U[E],T?T.p(m,b):(T=U[E]=re[E](m),T.c()),I(T,1),T.m(P,null));let B=N;N=oe(m),N===B?G[N].p(m,b):(X(),O(G[B],1,1,()=>{G[B]=null}),Q(),M=G[N],M?M.p(m,b):(M=G[N]=ae[N](m),M.c()),I(M,1),M.m($,null))},i(m){A||(I(w.$$.fragment,m),I(F.$$.fragment,m),I(T),I(M),A=!0)},o(m){O(w.$$.fragment,m),O(F.$$.fragment,m),O(T),O(M),A=!1},d(m){m&&(c(d),c(f),c(j),c(v)),c(e),c(l),c(i),c(a),W(w),W(F),U[E].d(),G[N].d()}}}function Ue(u,t,e){let{data:o}=t,l=!1,i=!1,n="",{form:a}=t;de(()=>{window.addEventListener("keydown",v=>{v.key==="Escape"&&(e(1,l=!1),e(2,i=!1))})});const r=()=>e(2,i=!0),d=()=>{o.owner&&e(2,i=!0)};function f(){n=this.value,e(3,n)}const _=()=>e(1,l=!0),w=()=>{o.owner&&e(1,l=!0)},j=()=>{o.owner&&e(1,l=!0)};return u.$$set=v=>{"data"in v&&e(0,o=v.data),"form"in v&&e(4,a=v.form)},u.$$.update=()=>{u.$$.dirty&16&&a&&we.set({type:"error",title:"Invalid credentials",message:a.error,duration:5e3})},[o,l,i,n,a,r,d,f,_,w,j]}class Ve extends pe{constructor(t){super(),be(this,t,Ue,Ae,_e,{data:0,form:4})}}export{Ve as component};
